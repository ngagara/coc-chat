{"version":3,"sources":["contexts/Contexts.js","constants/constants.js","icons/arrow.svg","icons/arrow_s.svg","icons/enlarge.svg","icons/minimize.svg","components/Chat/Dropdown.js","components/Chat/Header.js","icons/BTC.svg","components/Chat/Message.js","components/Chat/UserMessage.js","components/Chat/Main/routs/General.js","components/Chat/Main/routs/Clan.js","components/Chat/Main/routs/Friends.js","components/Chat/Main/routs/News.js","icons/emodji.svg","components/Chat/Footer.js","components/Chat/Main/Main.js","utils/api.js","utils/socket.js","components/Chat/Chat.js","App.js","index.js"],"names":["Context","React","createContext","NAV","lang","options","title","to","status","Dropdown","isActive","handSelectedLang","Navigation","useContext","className","map","item","index","onClick","Header","goTo","handleMinimize","handleEnlarge","handleShiftNav","handleActiveDropdown","isShift","context","large","enlarge","miniSize","minimize","nav","Object","values","style","display","src","arrow","alt","disabled","arrow_s","Message","name","userBadge","statusBadge","text","time","useState","isLevel","setLevel","useEffect","rand","Math","random","floor","UserMessage","General","scrollHandler","messages","userMessage","messageEnd","messagesEndRef","formatDate","date","substr","onScroll","ref","from","createdAt","id","BTC","Clan","Friends","News","Footer","sendMessage","setMessage","onChange","onKeyPress","type","minLength","maxLength","placeholder","emodji","Main","link","api","getMessages","limit","fetch","baseUrl","then","res","ok","json","Promise","reject","this","socket","io","require","transports","upgrade","Chat","memo","setLink","setLang","setMessages","userName","setMinimize","setEnlarge","setActive","setShift","setLimit","setUserMessage","useRef","console","log","addEventListener","message","prevState","Provider","value","page","setActivePage","e","target","key","current","scrollIntoView","block","behavior","emit","err","error","scrollHeight","abs","scrollTop","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6feac281.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nexport const Context = React.createContext();\r\n","export const NAV = [\r\n    {\r\n    lang: 'RU', \r\n    options:\r\n    [\r\n      {\r\n      title: 'общий',\r\n      to: 'general',\r\n      status: true\r\n    },\r\n    {\r\n      title: 'клан',\r\n      to: 'clan',\r\n      status: false\r\n    },\r\n    {\r\n      title: 'друзья',\r\n      to: 'friends',\r\n      status: false\r\n    },\r\n    {\r\n      title: 'новости',\r\n      to: 'news',\r\n      status: false\r\n    },\r\n    ]\r\n  },\r\n  {\r\n    lang: 'EN', \r\n    options:\r\n    [\r\n      {\r\n      title: 'general',\r\n      to: 'general',\r\n      status: false\r\n    },\r\n    {\r\n      title: 'clan',\r\n      to: 'clan',\r\n      status: false\r\n    },\r\n    {\r\n      title: 'friends',\r\n      to: 'friends',\r\n      status: false\r\n    },\r\n    {\r\n      title: 'news',\r\n      to: 'news',\r\n      status: false\r\n    },\r\n    ]\r\n  },\r\n  {\r\n    lang: 'ZHO', \r\n    options:\r\n    [\r\n    {\r\n      title: '聊天友们',\r\n      to: 'general',\r\n      status: false\r\n    },\r\n    {\r\n      title: '氏族朋',\r\n      to: 'clan',\r\n      status: false\r\n    },\r\n    {\r\n      title: '消息',\r\n      to: 'friends',\r\n      status: false\r\n    },\r\n    {\r\n      title: '朋友们',\r\n      to: 'news',\r\n      status: false\r\n    },\r\n    ]\r\n  },\r\n];\r\n","export default __webpack_public_path__ + \"static/media/arrow.f97395a0.svg\";","export default __webpack_public_path__ + \"static/media/arrow_s.ffb78e82.svg\";","export default __webpack_public_path__ + \"static/media/enlarge.80864486.svg\";","export default __webpack_public_path__ + \"static/media/minimize.85ecfccb.svg\";","import React from \"react\";\r\n\r\nimport './Chat.css';\r\n\r\nimport { Context } from '../../contexts/Contexts';\r\n\r\nfunction Dropdown({ isActive, handSelectedLang }) {\r\n\r\n  const context = React.useContext(Context);\r\n  const Navigation = context.NAV;\r\n\r\n    return (\r\n      <div className={`chat__drop-container ${isActive ? \"chat__drop-container_active\" : \"\"}`}>\r\n        { Navigation && Navigation.map((item, index) => (<p className=\"chat__drop-lang\" key={index} onClick={()=>{handSelectedLang(item.lang)}}>{item.lang}</p>))}\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default Dropdown;","import './Chat.css';\r\n\r\nimport React from \"react\";\r\n\r\nimport arrow from '../../icons/arrow.svg';\r\nimport arrow_s from '../../icons/arrow_s.svg';\r\nimport enlarge from '../../icons/enlarge.svg';\r\nimport minimize from '../../icons/minimize.svg';\r\n\r\nimport { Context } from '../../contexts/Contexts';\r\n\r\nimport Dropdown from './Dropdown'\r\n\r\nfunction Header({ goTo, lang, handleMinimize, handleEnlarge, handSelectedLang, handleShiftNav, handleActiveDropdown, isShift, isActive }) {\r\n\r\n  const context = React.useContext(Context);\r\n  const large = context.enlarge;\r\n  const miniSize = context.minimize;\r\n  const nav = context.NAV; \r\n\r\n  return (\r\n\r\n    <div className={`chat__header ${ large  ? \"chat__header_b-size\" : \"\"}`}>\r\n     <nav className={`chat__nav ${ large  ? \"chat__nav_b-size\" : \"\"}`}>\r\n       <ul className={`chat__links ${ isShift ? \"chat__links_shift\" : \"\"}  ${ large  ? \"chat__links_b-size\" : \"\"}`}>\r\n         { Object.values(nav).map(item => (\r\n           item.lang === lang && item.options.map((item, index) => ( <li key={index} onClick={()=>{goTo(item)}} className={`chat__link ${ item.status ? 'chat__link_active' : ''}`}>{item.title}</li>))\r\n         ))}     \r\n       </ul>\r\n     </nav>\r\n     <button className=\"button chat__arrow-button\" style={ large ? {display:'none'} : {display:'block'}} onClick={handleShiftNav}>\r\n       <img className=\"chat__arrow-icon chat__arrow-icon_nav\" src={arrow} alt=\"\"/>\r\n     </button>\r\n     <div className=\"chat__drop-wrapper\">\r\n       <p className=\"chat__drop-lang chat__drop-lang_selected\">{lang}</p>\r\n        <button className={`button chat__arrow-button ${isActive ? 'chat__arrow-button_drop' : ''}`} onClick={handleActiveDropdown} disabled={miniSize}>\r\n         <img className=\"chat__arrow-icon\" src={arrow_s} alt=\"\"/>\r\n        </button>\r\n        <Dropdown isActive={isActive} handSelectedLang={handSelectedLang}/>\r\n     </div>\r\n     <div className=\"chat__size-container\">\r\n     <button className=\"button chat__minimize-button\" onClick={handleMinimize}>\r\n        <img className=\"chat__minimize-icon\" src={minimize} alt=\"\"/>\r\n       </button>\r\n      <button className=\"button chat__enlarge-button\">\r\n        <img className=\"chat__enlarge-icon\" src={enlarge} onClick={handleEnlarge} alt=\"\"/>\r\n      </button>\r\n     </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/BTC.8f7ba890.svg\";","import './Chat.css';\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\n\r\nconst Message = ({ name, userBadge, statusBadge, text, time }) => {\r\n\r\n  const [isLevel, setLevel] = useState(0); \r\n\r\n  useEffect(()=>{\r\n    const rand = 1 + Math.random() * (10 - 1);\r\n    setLevel(Math.floor(rand))\r\n  },[])\r\n\r\n  return (\r\n    <div className=\"chat__message-container\">\r\n      <div className=\"chat__message\">\r\n          <div className=\"chat__message-header\">\r\n            <img className=\"chat__user-badge\" src={userBadge} alt=\"Значок Юзера\"/>\r\n            <p className=\"chat__user-name\">{name}</p>\r\n            <p className=\"chat__user-level\">{isLevel}</p>\r\n            {statusBadge && <img className=\"chat__status-badge\" src={statusBadge} alt=\"Статус\"/>}\r\n          </div>\r\n          <p className=\"chat__message-text\">{text}</p>\r\n      </div>\r\n      <p className=\"chat__message-time\">{time}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import './Chat.css';\r\n\r\nfunction UserMessage({ text, time }) {\r\n\r\n  return (\r\n    <div className=\"chat__message-container chat__message-container_user\">\r\n     <div className=\"chat__message chat__message_user\">\r\n       <p className=\"chat__message-text chat__message-text_user\">{text}</p>\r\n     </div>\r\n     <p className=\"chat__message-time\">{time}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default UserMessage;","import React from \"react\";\r\n\r\nimport '../../../Chat/Chat.css';\r\n\r\nimport BTC from '../../../../icons/BTC.svg';\r\n// import ADA from '../../../../icons/ADA.svg';\r\n// import admin_badge from '../../../../icons/admin_badge.svg';\r\n// import moderator_badge from '../../../../icons/moderator_badge.svg';\r\n\r\nimport Message from '../../Message';\r\nimport UserMessage from '../../UserMessage';\r\n\r\nimport { Context } from '../../../../contexts/Contexts';\r\n\r\nconst General = ({ lang, scrollHandler }) => {\r\n\r\n  const context = React.useContext(Context);\r\n  const messages = context.messages;\r\n  const userMessage = context.userMessage;\r\n  const messageEnd = context.messagesEndRef;\r\n\r\n  function formatDate(date) {\r\n    return date.substr(11, 5);\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat__container chat__container_general\" onScroll={scrollHandler}>\r\n      <div ref={messageEnd} className=\"chat__fake-block\"/>\r\n      { lang === 'RU' ?\r\n      <>\r\n        { messages && messages.map((item) => ( \r\n          item.from === userMessage.from ?  \r\n          <UserMessage key={item.id} text={item.text} time={formatDate(item.createdAt)}/> :\r\n          <Message key={item.id} name={item.from} userBadge={BTC} time={formatDate(item.createdAt)} text={item.text}/>\r\n        ))}\r\n      </> \r\n      : \r\n      <>\r\n        { messages && messages.map((item) => ( \r\n          item.from === userMessage.from ?  \r\n          <UserMessage key={item.id} text={item.text} time={formatDate(item.createdAt)}/> : null\r\n        ))}\r\n      </> \r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default General;\r\n","function Clan() {\r\n\r\n  return (\r\n    <div className=\"chat__container\">\r\n     <h1>КЛАН!</h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Clan;","function Friends() {\r\n\r\n    return (\r\n      <div className=\"chat__container\">\r\n      <h1>Друзья</h1>\r\n     </div>\r\n    );\r\n  }\r\n  \r\n  export default Friends;","function News() {\r\n\r\n    return (\r\n      <div className=\"chat__container\">\r\n       <h1>Новости</h1>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default News;","export default __webpack_public_path__ + \"static/media/emodji.f5162e62.svg\";","import React from \"react\";\r\n\r\nimport './Chat.css';\r\n\r\nimport emodji from '../../icons/emodji.svg';\r\n\r\nimport { Context } from '../../contexts/Contexts';\r\n\r\nfunction Footer( { sendMessage, setMessage } ) {\r\n\r\n  const context = React.useContext(Context);\r\n  const minimize = context.minimize;\r\n\r\n  return (\r\n    <div className={`chat__footer`} style={ minimize ? {display: 'none'} : {display: 'flex'}}>\r\n      <input className=\"chat__input\" onChange={setMessage} onKeyPress={sendMessage} type=\"text\" name=\"text\" minLength=\"1\" maxLength=\"200\" placeholder=\"Напишите сообщение...\"/>\r\n      <button className=\"button chat__emodji-button\">\r\n        <img className=\"chat__emodji-icon\" src={emodji} alt=\"\"/>\r\n      </button>\r\n   </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\nimport '../Chat.css';\r\n\r\nimport General from '../Main/routs/General';\r\nimport Clan from '../Main/routs/Clan';\r\nimport Friends from '../Main/routs/Friends';\r\nimport News from '../Main/routs/News';\r\nimport Footer from '../Footer';\r\n\r\nimport { Context } from '../../../contexts/Contexts';\r\n\r\nfunction Main({ setMessage, sendMessage, scrollHandler }) {\r\n\r\n  const context = React.useContext(Context);\r\n  const minimize = context.minimize;\r\n  const large = context.enlarge;\r\n  const link = context.link;\r\n  const lang = context.lang;\r\n\r\n  return (\r\n    <div className={`chat__main ${ large  ? \"chat__main_b-size\" : \"\"}`} style={ minimize ? {display: 'none'} : {display: 'flex'} }>  \r\n      { link === 'general' && \r\n      <>\r\n      <General lang={lang} scrollHandler={scrollHandler}/>\r\n      <Footer setMessage={setMessage} sendMessage={sendMessage}/>\r\n      </>\r\n      }\r\n      { link === 'clan' && <Clan/>}\r\n      { link === 'friends' && <Friends/>}\r\n      { link === 'news' && <News/>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Main;","class Api {\r\n    constructor(options) {\r\n        this.baseUrl = options.baseUrl;\r\n    }\r\n\r\n    getMessages = (limit) => {\r\n        return fetch(`${this.baseUrl}/messages?skip=${0}&limit=${limit}`)\r\n            .then(res => {\r\n                if (!res.ok) {\r\n                    return Promise.reject(`Ошибка:${res.status}. Запрос не выполнен.`);\r\n                } else {\r\n                    return res.json();\r\n                }\r\n            })\r\n    };\r\n\r\n};\r\n\r\nconst api = new Api({\r\n    baseUrl: \"https://api-23eqo.ondigitalocean.app/api\",\r\n});\r\n\r\nexport default api;\r\n","const { io } = require(\"socket.io-client\");\r\n\r\nconst socket = io(\"wss://api-23eqo.ondigitalocean.app\", {\r\n  transports: [\"websocket\"],\r\n  upgrade: false,\r\n});\r\n\r\nexport default socket","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Context } from '../../contexts/Contexts';\r\nimport { NAV } from '../../constants/constants'\r\n\r\nimport Header from './Header'\r\nimport Main from './Main/Main';\r\n\r\nimport api from '../../utils/api'\r\nimport socket from '../../utils/socket'\r\n\r\nimport './Chat.css';\r\n\r\nconst Chat = React.memo(() => {\r\n\r\n const [link, setLink] = useState('general');\r\n const [lang, setLang] = useState('RU');\r\n const [messages, setMessages] = useState([]);\r\n const [userName, setUserName] = useState('username');\r\n const [minimize, setMinimize] = useState(false);\r\n const [enlarge, setEnlarge] = useState(false);\r\n const [isActive, setActive] = useState(false);\r\n const [isShift, setShift] = useState(false);\r\n const [limit, setLimit] = useState(15);\r\n const [userMessage, setUserMessage] = useState(\r\n   {\r\n      \"from\": `${userName}`,\r\n      \"text\": \"\",\r\n    }\r\n  );\r\n\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    api.getMessages(limit).then((messages) => {\r\n      setMessages(messages);\r\n     });\r\n     console.log(limit);\r\n  },[limit]);\r\n\r\n  useEffect(() => {\r\n    socket.addEventListener('message', (message) => {\r\n      setMessages(prevState => ([message, ...prevState]));\r\n    });\r\n  },[]);\r\n\r\n  let scrollHandler = (e) => {\r\n    if (e.target.scrollHeight - Math.floor(Math.abs(e.target.scrollTop)) <= 322) {\r\n      setLimit(prevState => prevState += 15);\r\n    };\r\n  }; \r\n\r\n let sendMessage = (e) => {\r\n\r\n  if (e.target.value < 1) {\r\n    return\r\n  }\r\n\r\n  if (e.key === 'Enter') {\r\n    messagesEndRef.current.scrollIntoView({ block: \"end\", behavior: \"smooth\" });\r\n    socket.emit(\"message\", userMessage, (err) => {\r\n      if (err) {\r\n        console.error(err);\r\n      } else {\r\n       api.getMessages(limit).then((messages) =>{\r\n        setMessages(messages);\r\n\r\n       });\r\n        console.log(\"success\");\r\n      }\r\n    });\r\n\r\n    e.target.value = ''\r\n\r\n  }\r\n  };\r\n\r\n  let setMessage = (e) => {\r\n    setUserMessage(prevState => ({\r\n      ...prevState,\r\n      \"text\": e.target.value\r\n      }\r\n    ))\r\n  }\r\n \r\n let setActivePage = (page) => {\r\n  if (page.status === false) {\r\n    Object.values(NAV).map(item => {\r\n     return item.options.map(item => {\r\n        return item.status = false\r\n      })\r\n    })\r\n   page.status = !page.status\r\n } \r\n }\r\n\r\n  let goTo = (page) => {\r\n    setLink(page.to);\r\n    setActivePage(page)\r\n  }\r\n\r\n  let handleMinimize = () => {\r\n    setMinimize(!minimize);\r\n    setEnlarge(false);\r\n    setActive(false);\r\n  }; \r\n\r\n  let handleEnlarge = () => {\r\n    setEnlarge(!enlarge);\r\n    setMinimize(false);\r\n  };\r\n\r\n  let handleActiveDropdown = () => {\r\n    setActive(!isActive)\r\n  }  \r\n  \r\n  let handleShiftNav = () => {\r\n    setShift(!isShift)\r\n  } \r\n\r\n  let handSelectedLang = (lang) => {\r\n    setLang(lang);\r\n    setActive(!isActive);\r\n    setShift(false)\r\n    return Object.values(NAV).map(item => {\r\n      return item.options.map(item => {\r\n        if( link === item.to ) {\r\n         return item.status = true\r\n        } else {\r\n          return item.status = false\r\n        }\r\n       })\r\n     })\r\n  }\r\n\r\n  return (\r\n    <Context.Provider value={{messages, userMessage, userName, minimize, enlarge, NAV, link, lang, messagesEndRef}}>\r\n     <aside className={`chat ${ enlarge ? \"chat_b-size\" : \"\"}`}>\r\n      <Header \r\n       goTo={goTo}\r\n       lang={lang}\r\n       setLang={setLang}\r\n       handleMinimize={handleMinimize}\r\n       handleEnlarge={handleEnlarge}\r\n       handSelectedLang={handSelectedLang}\r\n       handleShiftNav={handleShiftNav}\r\n       handleActiveDropdown={handleActiveDropdown}\r\n       isShift={isShift}\r\n       isActive={isActive}\r\n       />\r\n      <Main setMessage={setMessage} sendMessage={sendMessage} scrollHandler={scrollHandler}/>\r\n    </aside>\r\n    </Context.Provider>\r\n  );\r\n});\r\n\r\nexport default Chat;\r\n","import Chat from './components/Chat/Chat'\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Chat></Chat>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n      <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}