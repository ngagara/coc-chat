(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{40:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(34),i=a.n(n),r=(a(40),a(18)),o=a(2),l=c.a.createContext(),u=[{lang:"RU",options:[{title:"\u043e\u0431\u0449\u0438\u0439",to:"general",status:!0},{title:"\u043a\u043b\u0430\u043d",to:"clan",status:!1},{title:"\u0434\u0440\u0443\u0437\u044c\u044f",to:"friends",status:!1},{title:"\u043d\u043e\u0432\u043e\u0441\u0442\u0438",to:"news",status:!1}]},{lang:"EN",options:[{title:"general",to:"general",status:!1},{title:"clan",to:"clan",status:!1},{title:"friends",to:"friends",status:!1},{title:"news",to:"news",status:!1}]},{lang:"ZHO",options:[{title:"\u804a\u5929\u53cb\u4eec",to:"general",status:!1},{title:"\u6c0f\u65cf\u670b",to:"clan",status:!1},{title:"\u6d88\u606f",to:"friends",status:!1},{title:"\u670b\u53cb\u4eec",to:"news",status:!1}]}],j=(a(8),a.p+"static/media/arrow.f97395a0.svg"),h=a.p+"static/media/arrow_s.ffb78e82.svg",d=a.p+"static/media/enlarge.80864486.svg",b=a.p+"static/media/minimize.85ecfccb.svg",_=a(0);var m=function(e){var t=e.isActive,a=e.handSelectedLang,s=c.a.useContext(l).NAV;return Object(_.jsx)("div",{className:"chat__drop-container ".concat(t?"chat__drop-container_active":""),children:s&&s.map((function(e,t){return Object(_.jsx)("p",{className:"chat__drop-lang",onClick:function(){a(e.lang)},children:e.lang},t)}))})};var g=function(e){var t=e.goTo,a=e.lang,s=e.handleMinimize,n=e.handleEnlarge,i=e.handSelectedLang,r=e.handleShiftNav,o=e.handleActiveDropdown,u=e.isShift,g=e.isActive,O=c.a.useContext(l),f=O.enlarge,x=O.minimize,v=O.NAV;return Object(_.jsxs)("div",{className:"chat__header ".concat(f?"chat__header_b-size":""),children:[Object(_.jsx)("nav",{className:"chat__nav ".concat(f?"chat__nav_b-size":""),children:Object(_.jsx)("ul",{className:"chat__links ".concat(u?"chat__links_shift":"","  ").concat(f?"chat__links_b-size":""),children:Object.values(v).map((function(e){return e.lang===a&&e.options.map((function(e,a){return Object(_.jsx)("li",{onClick:function(){t(e)},className:"chat__link ".concat(e.status?"chat__link_active":""),children:e.title},a)}))}))})}),Object(_.jsx)("button",{className:"button chat__arrow-button",style:f?{display:"none"}:{display:"block"},onClick:r,children:Object(_.jsx)("img",{className:"chat__arrow-icon chat__arrow-icon_nav",src:j,alt:""})}),Object(_.jsxs)("div",{className:"chat__drop-wrapper",children:[Object(_.jsx)("p",{className:"chat__drop-lang chat__drop-lang_selected",children:a}),Object(_.jsx)("button",{className:"button chat__arrow-button ".concat(g?"chat__arrow-button_drop":""),onClick:o,disabled:x,children:Object(_.jsx)("img",{className:"chat__arrow-icon",src:h,alt:""})}),Object(_.jsx)(m,{isActive:g,handSelectedLang:i})]}),Object(_.jsxs)("div",{className:"chat__size-container",children:[Object(_.jsx)("button",{className:"button chat__minimize-button",onClick:s,children:Object(_.jsx)("img",{className:"chat__minimize-icon",src:b,alt:""})}),Object(_.jsx)("button",{className:"button chat__enlarge-button",children:Object(_.jsx)("img",{className:"chat__enlarge-icon",src:d,onClick:n,alt:""})})]})]})},O=a.p+"static/media/BTC.8f7ba890.svg";var f=function(e){var t=e.name,a=e.userBadge,c=e.statusBadge,n=e.text,i=e.time,r=Object(s.useState)(0),l=Object(o.a)(r,2),u=l[0],j=l[1];return Object(s.useEffect)((function(){var e=1+9*Math.random();j(Math.floor(e))}),[]),Object(_.jsxs)("div",{className:"chat__message-container",children:[Object(_.jsxs)("div",{className:"chat__message",children:[Object(_.jsxs)("div",{className:"chat__message-header",children:[Object(_.jsx)("img",{className:"chat__user-badge",src:a,alt:"\u0417\u043d\u0430\u0447\u043e\u043a \u042e\u0437\u0435\u0440\u0430"}),Object(_.jsx)("p",{className:"chat__user-name",children:t}),Object(_.jsx)("p",{className:"chat__user-level",children:u}),c&&Object(_.jsx)("img",{className:"chat__status-badge",src:c,alt:"\u0421\u0442\u0430\u0442\u0443\u0441"})]}),Object(_.jsx)("p",{className:"chat__message-text",children:n})]}),Object(_.jsx)("p",{className:"chat__message-time",children:i})]})};var x=function(e){var t=e.text,a=e.time;return Object(_.jsxs)("div",{className:"chat__message-container chat__message-container_user",children:[Object(_.jsx)("div",{className:"chat__message chat__message_user",children:Object(_.jsx)("p",{className:"chat__message-text chat__message-text_user",children:t})}),Object(_.jsx)("p",{className:"chat__message-time",children:a})]})};var v=function(e){var t=e.lang,a=c.a.useContext(l),s=a.messages,n=a.userMessage;function i(e){return e.substr(11,5)}return Object(_.jsx)("div",{className:"chat__container chat__container_general",children:"RU"===t?Object(_.jsx)(_.Fragment,{children:s&&s.map((function(e){return e.from===n.from?Object(_.jsx)(x,{text:e.text,time:i(e.createdAt)},e.id):Object(_.jsx)(f,{name:e.from,userBadge:O,time:i(e.createdAt),text:e.text},e.id)}))}):Object(_.jsx)("div",{className:"chat__container",children:Object(_.jsx)("h1",{children:"\u0427\u0410\u0422"})})})};var p=function(){return Object(_.jsx)("div",{className:"chat__container",children:Object(_.jsx)("h1",{children:"\u041a\u041b\u0410\u041d!"})})};var N=function(){return Object(_.jsx)("div",{className:"chat__container",children:Object(_.jsx)("h1",{children:"\u0414\u0440\u0443\u0437\u044c\u044f"})})};var S=function(){return Object(_.jsx)("div",{className:"chat__container",children:Object(_.jsx)("h1",{children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"})})},w=a.p+"static/media/emodji.f5162e62.svg";var M=function(e){var t=e.sendMessage,a=e.setMessage,s=c.a.useContext(l).minimize;return Object(_.jsxs)("div",{className:"chat__footer",style:s?{display:"none"}:{display:"flex"},children:[Object(_.jsx)("input",{className:"chat__input",onChange:a,onKeyPress:t,type:"text",name:"text",minLength:"1",maxLength:"200",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435..."}),Object(_.jsx)("button",{className:"button chat__emodji-button",children:Object(_.jsx)("img",{className:"chat__emodji-icon",src:w,alt:""})})]})};var k=function(e){var t=e.setMessage,a=e.sendMessage,s=c.a.useContext(l),n=s.minimize,i=s.enlarge,r=s.link,o=s.lang;return Object(_.jsxs)("div",{className:"chat__main ".concat(i?"chat__main_b-size":""),style:n?{display:"none"}:{display:"flex"},children:["general"===r&&"RU"===o&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(v,{lang:o}),Object(_.jsx)(M,{setMessage:t,sendMessage:a})]}),"clan"===r&&Object(_.jsx)(p,{}),"friends"===r&&Object(_.jsx)(N,{}),"news"===r&&Object(_.jsx)(S,{})]})},y=a(35),z=new function e(t){var a=this;Object(y.a)(this,e),this.getMessages=function(e){return fetch("".concat(a.baseUrl,"/messages?skip=",0,"&limit=").concat(e)).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430:".concat(e.status,". \u0417\u0430\u043f\u0440\u043e\u0441 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d."))}))},this.baseUrl=t.baseUrl}({baseUrl:"https://api-23eqo.ondigitalocean.app/api"}),C=(0,a(42).io)("wss://api-23eqo.ondigitalocean.app",{transports:["websocket"],upgrade:!1});var A=function(){var e=Object(s.useState)("general"),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)("RU"),i=Object(o.a)(n,2),j=i[0],h=i[1],d=Object(s.useState)([]),b=Object(o.a)(d,2),m=b[0],O=b[1],f=Object(s.useState)("GG_nf"),x=Object(o.a)(f,2),v=x[0],p=(x[1],Object(s.useState)(!1)),N=Object(o.a)(p,2),S=N[0],w=N[1],M=Object(s.useState)(!1),y=Object(o.a)(M,2),A=y[0],E=y[1],L=Object(s.useState)(!1),U=Object(o.a)(L,2),B=U[0],q=U[1],R=Object(s.useState)(!1),T=Object(o.a)(R,2),H=T[0],P=T[1],V=Object(s.useState)(15),D=Object(o.a)(V,2),F=D[0],G=D[1],J=Object(s.useState)(!1),I=Object(o.a)(J,2),K=I[0],Z=I[1],Q=Object(s.useState)({from:"".concat(v),text:""}),W=Object(o.a)(Q,2),X=W[0],Y=W[1];Object(s.useEffect)((function(){z.getMessages(F).then((function(e){O(e)})),C.addEventListener("message",(function(){z.getMessages(F).then((function(e){O(e)}))}))}),[]),Object(s.useEffect)((function(){K&&z.getMessages(F).then((function(e){O(e)}))}),[K]),Object(s.useEffect)((function(){return document.querySelector(".chat__container_general").addEventListener("scroll",$),function(){document.querySelector(".chat__container_general").addEventListener("scroll",$)}}),[]);var $=function(e){e.target.scrollHeight-Math.abs(e.target.scrollTop)-e.target.offsetHeight<1?(G((function(e){return e+15})),Z(!0)):Z(!1)};return Object(_.jsx)(l.Provider,{value:{messages:m,userMessage:X,userName:v,minimize:S,enlarge:A,NAV:u,link:a,lang:j},children:Object(_.jsxs)("aside",{className:"chat ".concat(A?"chat_b-size":""),children:[Object(_.jsx)(g,{goTo:function(e){c(e.to),function(e){!1===e.status&&(Object.values(u).map((function(e){return e.options.map((function(e){return e.status=!1}))})),e.status=!e.status)}(e)},lang:j,setLang:h,handleMinimize:function(){w(!S),E(!1),q(!1)},handleEnlarge:function(){E(!A),w(!1)},handSelectedLang:function(e){return h(e),q(!B),P(!1),Object.values(u).map((function(e){return e.options.map((function(e){return a===e.to?e.status=!0:e.status=!1}))}))},handleShiftNav:function(){P(!H)},handleActiveDropdown:function(){q(!B)},isShift:H,isActive:B}),Object(_.jsx)(k,{setMessage:function(e){Y((function(t){return Object(r.a)(Object(r.a)({},t),{},{text:e.target.value})}))},sendMessage:function(e){e.target.value<1||"Enter"===e.key&&(C.emit("message",X,(function(e){e?console.error(e):(console.log("success"),z.getMessages(F).then((function(e){O(e)})))})),e.target.value="")}})]})})};a(74);var E=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(A,{})})};i.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(E,{})}),document.getElementById("root"))},8:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.13c146e9.chunk.js.map